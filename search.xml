<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hello World</title>
    <url>/2020/04/09/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>c#点餐系统</title>
    <url>/2020/04/09/c-%E7%82%B9%E9%A4%90%E7%B3%BB%E7%BB%9F/</url>
    <content><![CDATA[<h1 id="Sweet点餐系统"><a href="#Sweet点餐系统" class="headerlink" title="Sweet点餐系统"></a>Sweet点餐系统</h1><p>项目介绍：一家店铺使用的外卖点餐系统<br>本项目分三大模块：登录注册模块，用户模块，店家模块</p>
<h2 id="1-登录注册模块"><a href="#1-登录注册模块" class="headerlink" title="1.登录注册模块"></a>1.登录注册模块</h2><p><strong>登录分为用户登录和管理员登录（店家），管理员有且只有一个账号可以登录。用户登录需要先注册，注册必须用手机号注册。</strong></p>
<p>  <strong>登录界面效果图</strong><br> 登录主要就是判断，多加些判断就行了<img src="https://img-blog.csdnimg.cn/2019062612285855.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDczMjI2MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>   <strong>登录代码展示:</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#region 窗体效果</span><br><span class="line">       public class Win32</span><br><span class="line">       &#123;</span><br><span class="line">           public const Int32 AW_HOR_POSITIVE &#x3D; 0x00000001; &#x2F;&#x2F; 从左到右打开窗口</span><br><span class="line">           public const Int32 AW_HOR_NEGATIVE &#x3D; 0x00000002; &#x2F;&#x2F; 从右到左打开窗口</span><br><span class="line">           public const Int32 AW_VER_POSITIVE &#x3D; 0x00000004; &#x2F;&#x2F; 从上到下打开窗口</span><br><span class="line">           public const Int32 AW_VER_NEGATIVE &#x3D; 0x00000008; &#x2F;&#x2F; 从下到上打开窗口</span><br><span class="line">           public const Int32 AW_CENTER &#x3D; 0x00000010; &#x2F;&#x2F;若使用了AW_HIDE标志，则使窗口向内重叠；若未使用AW_HIDE标志，则使窗口向外扩展。</span><br><span class="line">           public const Int32 AW_HIDE &#x3D; 0x00010000; &#x2F;&#x2F;隐藏窗口，缺省则显示窗口。</span><br><span class="line">           public const Int32 AW_ACTIVATE &#x3D; 0x00020000; &#x2F;&#x2F;激活窗口。在使用了AW_HIDE标志后不要使用这个标志。</span><br><span class="line">           public const Int32 AW_SLIDE &#x3D; 0x00040000; &#x2F;&#x2F;使用滑动类型。缺省则为滚动动画类型。当使用AW_CENTER标志时，这个标志就被忽略。</span><br><span class="line">           public const Int32 AW_BLEND &#x3D; 0x00080000; &#x2F;&#x2F;使用淡出效果。只有当hWnd为顶层窗口的时候才可以使用此标志。</span><br><span class="line">           [DllImport(&quot;user32.dll&quot;, CharSet &#x3D; CharSet.Auto)]</span><br><span class="line">           public static extern bool AnimateWindow(</span><br><span class="line">         IntPtr hwnd, &#x2F;&#x2F; handle to window</span><br><span class="line">             int dwTime, &#x2F;&#x2F; duration of animation</span><br><span class="line">             int dwFlags &#x2F;&#x2F; animation type</span><br><span class="line">             );</span><br><span class="line">       &#125;</span><br><span class="line">       #endregion</span><br><span class="line">       ValidCode validCode &#x3D; new ValidCode(5, ValidCode.CodeType.Numbers);&#x2F;&#x2F;实例化这个对象</span><br><span class="line">       </span><br><span class="line">       &#x2F;&#x2F;窗体加载</span><br><span class="line">       private void Login_Load(object sender, EventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           picValidCode.Image &#x3D; Bitmap.FromStream(validCode.CreateCheckCodeImage());&#x2F;&#x2F;点击图片更换验证码</span><br><span class="line">           Win32.AnimateWindow(this.Handle,500, Win32.AW_VER_POSITIVE);&#x2F;&#x2F;窗体出现效果</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       &#x2F;&#x2F;验证码图片</span><br><span class="line">       private void picValidCode_Click(object sender, EventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           picValidCode.Image &#x3D; Bitmap.FromStream(validCode.CreateCheckCodeImage());&#x2F;&#x2F;点击图片更换验证码</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       &#x2F;&#x2F;注册</span><br><span class="line">       private void linkLabel2_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           Enroll EN &#x3D; new Enroll();</span><br><span class="line">           this.Hide();</span><br><span class="line">           EN.ShowDialog();</span><br><span class="line">           Application.ExitThread();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       &#x2F;&#x2F;登录按钮</span><br><span class="line">       private void LoginButton_Click(object sender, EventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           Saveusername.name &#x3D; Username.Text;</span><br><span class="line">           string sql &#x3D; string.Format(&quot;select * from UserList where UserID&#x3D;&#39;&#123;0&#125;&#39;and UserPassword&#x3D;&#39;&#123;1&#125; &#39;&quot;, Username.Text, password.Text);</span><br><span class="line">           SqlDataReader reader &#x3D; DBHelper.GetDataReader(sql);</span><br><span class="line">           if (Username.Text &#x3D;&#x3D; &quot;&quot;)</span><br><span class="line">           &#123;</span><br><span class="line">               MessageBox.Show(&quot;请输入用户名！&quot;, &quot;提示&quot;, MessageBoxButtons.OK, MessageBoxIcon.Asterisk);</span><br><span class="line">           &#125;</span><br><span class="line">           else if (password.Text &#x3D;&#x3D; &quot;&quot;)</span><br><span class="line">           &#123;</span><br><span class="line">               MessageBox.Show(&quot;请输入密码！&quot;, &quot;提示&quot;, MessageBoxButtons.OK, MessageBoxIcon.Asterisk);</span><br><span class="line">           &#125;</span><br><span class="line">           else if (!this.txtValidCode.Text.Equals(validCode.CheckCode))&#x2F;&#x2F;验证是否输入正确</span><br><span class="line">           &#123;</span><br><span class="line"></span><br><span class="line">               MessageBox.Show(&quot; 请输入正确的验证码!&quot;, this.Text);</span><br><span class="line"></span><br><span class="line">               this.txtValidCode.Focus();</span><br><span class="line">               this.txtValidCode.Text &#x3D; &quot;&quot;;</span><br><span class="line">               reader.Close();</span><br><span class="line">               return;</span><br><span class="line"></span><br><span class="line">           &#125;</span><br><span class="line">           else if (reader.Read())</span><br><span class="line">           &#123;</span><br><span class="line">               Saveusername.ID &#x3D; reader[&quot;ID&quot;].ToString();&#x2F;&#x2F;获取ID用于个人中心修改信息</span><br><span class="line">               reader.Close();</span><br><span class="line">               if (Saveusername.name&#x3D;&#x3D;&quot;Sweet&quot;)</span><br><span class="line">               &#123;</span><br><span class="line">                   管理员界面.GLY gLY &#x3D; new 管理员界面.GLY();</span><br><span class="line">                   this.Hide();</span><br><span class="line">                   gLY.ShowDialog();</span><br><span class="line">                   Application.ExitThread();</span><br><span class="line">               &#125;</span><br><span class="line">               XMB xMB &#x3D; new XMB();</span><br><span class="line">               this.Hide();</span><br><span class="line">               xMB.ShowDialog();</span><br><span class="line">               Application.ExitThread();</span><br><span class="line">           &#125;</span><br><span class="line">           else</span><br><span class="line">           &#123;</span><br><span class="line">               MessageBox.Show(&quot;用户名或密码输入错误！&quot;, &quot;提示&quot;, MessageBoxButtons.OK, MessageBoxIcon.Error);</span><br><span class="line">           &#125;</span><br><span class="line">           reader.Close();</span><br><span class="line"></span><br><span class="line">           picValidCode.Image &#x3D; Bitmap.FromStream(validCode.CreateCheckCodeImage());&#x2F;&#x2F;点击图片更换验证码</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       &#x2F;&#x2F;忘记密码</span><br><span class="line">       private void linkLabel1_LinkClicked_1(object sender, LinkLabelLinkClickedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           ForgetPwd forget &#x3D; new ForgetPwd();</span><br><span class="line">           this.Hide();</span><br><span class="line">           forget.ShowDialog();</span><br><span class="line">           Application.ExitThread();</span><br><span class="line">       &#125;</span><br><span class="line">       #region 用于窗体移动</span><br><span class="line">       private Point mPoint;&#x2F;&#x2F;定义一个位置信息Point用于存储鼠标位置</span><br><span class="line">       private void Login_MouseDown(object sender, MouseEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           mPoint &#x3D; new Point(e.X, e.Y);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       private void Login_MouseMove(object sender, MouseEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           if (e.Button &#x3D;&#x3D; MouseButtons.Left)</span><br><span class="line">           &#123;</span><br><span class="line">               this.Location &#x3D; new Point(this.Location.X + e.X - mPoint.X, this.Location.Y + e.Y - mPoint.Y);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       #endregion</span><br><span class="line"></span><br><span class="line">       private void Login_FormClosed(object sender, FormClosedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           Win32.AnimateWindow(this.Handle, 500, Win32.AW_BLEND|Win32.AW_HIDE);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       private void pictureBox3_Click(object sender, EventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           this.Close();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       private void pictureBox4_Click(object sender, EventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           this.WindowState &#x3D; FormWindowState.Minimized;&#x2F;&#x2F;最小化</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>


<p> <strong>图片验证码代码展示:</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public class ValidCode</span><br><span class="line">   &#123;</span><br><span class="line">       #region Private Fields</span><br><span class="line"></span><br><span class="line">       private const double PI &#x3D; 3.1415926535897932384626433832795;</span><br><span class="line"></span><br><span class="line">       private const double PI2 &#x3D; 6.283185307179586476925286766559;</span><br><span class="line"></span><br><span class="line">       &#x2F;&#x2F;private readonly int _wordsLen &#x3D; 4; </span><br><span class="line"></span><br><span class="line">       private int _len;</span><br><span class="line"></span><br><span class="line">       private CodeType _codetype;</span><br><span class="line"></span><br><span class="line">       private readonly Single _jianju &#x3D; (float)18.0;</span><br><span class="line"></span><br><span class="line">       private readonly Single _height &#x3D; (float)24.0;</span><br><span class="line"></span><br><span class="line">       private string _checkCode;</span><br><span class="line"></span><br><span class="line">       #endregion</span><br><span class="line"></span><br><span class="line">       #region Public Property</span><br><span class="line"></span><br><span class="line">       public string CheckCode</span><br><span class="line">       &#123;</span><br><span class="line"></span><br><span class="line">           get</span><br><span class="line">           &#123;</span><br><span class="line"></span><br><span class="line">               return _checkCode;</span><br><span class="line"></span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       #endregion</span><br><span class="line"></span><br><span class="line">       #region Constructors</span><br><span class="line"></span><br><span class="line">       &#x2F;&#x2F;&#x2F; &lt;summary&gt; </span><br><span class="line"></span><br><span class="line">       &#x2F;&#x2F;&#x2F; public constructors </span><br><span class="line"></span><br><span class="line">       &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt; </span><br><span class="line"></span><br><span class="line">       &#x2F;&#x2F;&#x2F; &lt;param name&#x3D;&quot;len&quot;&gt; 验证码长度 &lt;&#x2F;param&gt; </span><br><span class="line"></span><br><span class="line">       &#x2F;&#x2F;&#x2F; &lt;param name&#x3D;&quot;ctype&quot;&gt; 验证码类型：字母、数字、字母+ 数字 &lt;&#x2F;param&gt; </span><br><span class="line"></span><br><span class="line">       public ValidCode(int len, CodeType ctype)</span><br><span class="line">       &#123;</span><br><span class="line"></span><br><span class="line">           this._len &#x3D; len;</span><br><span class="line"></span><br><span class="line">           this._codetype &#x3D; ctype;</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       #endregion</span><br><span class="line"></span><br><span class="line">       #region Public Field</span><br><span class="line"></span><br><span class="line">       public enum CodeType &#123; Words, Numbers, Characters, Alphas &#125;</span><br><span class="line"></span><br><span class="line">       #endregion</span><br><span class="line"></span><br><span class="line">       #region Private Methods</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       private string GenerateNumbers()</span><br><span class="line">       &#123;</span><br><span class="line"></span><br><span class="line">           string strOut &#x3D; &quot;&quot;;</span><br><span class="line"></span><br><span class="line">           System.Random random &#x3D; new Random();</span><br><span class="line"></span><br><span class="line">           for (int i &#x3D; 0; i &lt; _len; i++)</span><br><span class="line">           &#123;</span><br><span class="line"></span><br><span class="line">               string num &#x3D; Convert.ToString(random.Next(10000) % 10);</span><br><span class="line"></span><br><span class="line">               strOut +&#x3D; num;</span><br><span class="line"></span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           return strOut.Trim();</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       private string GenerateCharacters()</span><br><span class="line">       &#123;</span><br><span class="line"></span><br><span class="line">           string strOut &#x3D; &quot;&quot;;</span><br><span class="line"></span><br><span class="line">           System.Random random &#x3D; new Random();</span><br><span class="line"></span><br><span class="line">           for (int i &#x3D; 0; i &lt; _len; i++)</span><br><span class="line">           &#123;</span><br><span class="line"></span><br><span class="line">               string num &#x3D; Convert.ToString((char)(65 + random.Next(10000) % 26));</span><br><span class="line"></span><br><span class="line">               strOut +&#x3D; num;</span><br><span class="line"></span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           return strOut.Trim();</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       &#x2F;&#x2F; </span><br><span class="line"></span><br><span class="line">       private string GenerateAlphas()</span><br><span class="line">       &#123;</span><br><span class="line"></span><br><span class="line">           string strOut &#x3D; &quot;&quot;;</span><br><span class="line"></span><br><span class="line">           string num &#x3D; &quot;&quot;;</span><br><span class="line"></span><br><span class="line">           System.Random random &#x3D; new Random();</span><br><span class="line"></span><br><span class="line">           for (int i &#x3D; 0; i &lt; _len; i++)</span><br><span class="line">           &#123;</span><br><span class="line"></span><br><span class="line">               if (random.Next(500) % 2 &#x3D;&#x3D; 0)</span><br><span class="line">               &#123;</span><br><span class="line"></span><br><span class="line">                   num &#x3D; Convert.ToString(random.Next(10000) % 10);</span><br><span class="line"></span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">               else</span><br><span class="line">               &#123;</span><br><span class="line"></span><br><span class="line">                   num &#x3D; Convert.ToString((char)(65 + random.Next(10000) % 26));</span><br><span class="line"></span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">               strOut +&#x3D; num;</span><br><span class="line"></span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           return strOut.Trim();</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       private System.Drawing.Bitmap TwistImage(Bitmap srcBmp, bool bXDir, double dMultValue, double dPhase)</span><br><span class="line">       &#123;</span><br><span class="line"></span><br><span class="line">           System.Drawing.Bitmap destBmp &#x3D; new Bitmap(srcBmp.Width, srcBmp.Height);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">           &#x2F;&#x2F; 将位图背景填充为白色 </span><br><span class="line"></span><br><span class="line">           System.Drawing.Graphics graph &#x3D; System.Drawing.Graphics.FromImage(destBmp);</span><br><span class="line"></span><br><span class="line">           graph.FillRectangle(new SolidBrush(System.Drawing.Color.White), 0, 0, destBmp.Width, destBmp.Height);</span><br><span class="line"></span><br><span class="line">           graph.Dispose();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">           double dBaseAxisLen &#x3D; bXDir ? (double)destBmp.Height : (double)destBmp.Width;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">           for (int i &#x3D; 0; i &lt; destBmp.Width; i++)</span><br><span class="line">           &#123;</span><br><span class="line"></span><br><span class="line">               for (int j &#x3D; 0; j &lt; destBmp.Height; j++)</span><br><span class="line">               &#123;</span><br><span class="line"></span><br><span class="line">                   double dx &#x3D; 0;</span><br><span class="line"></span><br><span class="line">                   dx &#x3D; bXDir ? (PI2 * (double)j) &#x2F; dBaseAxisLen : (PI2 * (double)i) &#x2F; dBaseAxisLen;</span><br><span class="line"></span><br><span class="line">                   dx +&#x3D; dPhase;</span><br><span class="line"></span><br><span class="line">                   double dy &#x3D; Math.Sin(dx);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                   &#x2F;&#x2F; 取得当前点的颜色 </span><br><span class="line"></span><br><span class="line">                   int nOldX &#x3D; 0, nOldY &#x3D; 0;</span><br><span class="line"></span><br><span class="line">                   nOldX &#x3D; bXDir ? i + (int)(dy * dMultValue) : i;</span><br><span class="line"></span><br><span class="line">                   nOldY &#x3D; bXDir ? j : j + (int)(dy * dMultValue);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                   System.Drawing.Color color &#x3D; srcBmp.GetPixel(i, j);</span><br><span class="line"></span><br><span class="line">                   if (nOldX &gt;&#x3D; 0 &amp;&amp; nOldX &lt; destBmp.Width</span><br><span class="line"></span><br><span class="line">                    &amp;&amp; nOldY &gt;&#x3D; 0 &amp;&amp; nOldY &lt; destBmp.Height)</span><br><span class="line">                   &#123;</span><br><span class="line"></span><br><span class="line">                       destBmp.SetPixel(nOldX, nOldY, color);</span><br><span class="line"></span><br><span class="line">                   &#125;</span><br><span class="line"></span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">           return destBmp;</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       #endregion</span><br><span class="line"></span><br><span class="line">       #region Public Methods</span><br><span class="line"></span><br><span class="line">       public Stream CreateCheckCodeImage()</span><br><span class="line">       &#123;</span><br><span class="line"></span><br><span class="line">           string checkCode;</span><br><span class="line"></span><br><span class="line">           switch (_codetype)</span><br><span class="line">           &#123;</span><br><span class="line"></span><br><span class="line">               case CodeType.Alphas:</span><br><span class="line"></span><br><span class="line">                   checkCode &#x3D; GenerateAlphas();</span><br><span class="line"></span><br><span class="line">                   break;</span><br><span class="line"></span><br><span class="line">               case CodeType.Numbers:</span><br><span class="line"></span><br><span class="line">                   checkCode &#x3D; GenerateNumbers();</span><br><span class="line"></span><br><span class="line">                   break;</span><br><span class="line"></span><br><span class="line">               case CodeType.Characters:</span><br><span class="line"></span><br><span class="line">                   checkCode &#x3D; GenerateCharacters();</span><br><span class="line"></span><br><span class="line">                   break;</span><br><span class="line"></span><br><span class="line">               default:</span><br><span class="line"></span><br><span class="line">                   checkCode &#x3D; GenerateAlphas();</span><br><span class="line"></span><br><span class="line">                   break;</span><br><span class="line"></span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           this._checkCode &#x3D; checkCode;</span><br><span class="line"></span><br><span class="line">           MemoryStream ms &#x3D; null;</span><br><span class="line"></span><br><span class="line">           &#x2F;&#x2F; </span><br><span class="line"></span><br><span class="line">           if (checkCode &#x3D;&#x3D; null || checkCode.Trim() &#x3D;&#x3D; String.Empty)</span><br><span class="line"></span><br><span class="line">               return null;</span><br><span class="line"></span><br><span class="line">           Bitmap image &#x3D; new System.Drawing.Bitmap((int)Math.Ceiling((checkCode.Length * _jianju)), (int)_height);</span><br><span class="line"></span><br><span class="line">           Graphics g &#x3D; Graphics.FromImage(image);</span><br><span class="line"></span><br><span class="line">           try</span><br><span class="line">           &#123;</span><br><span class="line"></span><br><span class="line">               Random random &#x3D; new Random();</span><br><span class="line"></span><br><span class="line">               g.Clear(Color.White);</span><br><span class="line"></span><br><span class="line">               &#x2F;&#x2F; 画图片的背景噪音线 </span><br><span class="line"></span><br><span class="line">               for (int i &#x3D; 0; i &lt; 18; i++)</span><br><span class="line">               &#123;</span><br><span class="line"></span><br><span class="line">                   int x1 &#x3D; random.Next(image.Width);</span><br><span class="line"></span><br><span class="line">                   int x2 &#x3D; random.Next(image.Width);</span><br><span class="line"></span><br><span class="line">                   int y1 &#x3D; random.Next(image.Height);</span><br><span class="line"></span><br><span class="line">                   int y2 &#x3D; random.Next(image.Height);</span><br><span class="line"></span><br><span class="line">                   g.DrawLine(new Pen(Color.FromArgb(random.Next()), 1), x1, y1, x2, y2);</span><br><span class="line"></span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">               Font font &#x3D; new System.Drawing.Font(&quot;Times New Roman&quot;, 14, System.Drawing.FontStyle.Bold);</span><br><span class="line"></span><br><span class="line">               LinearGradientBrush brush &#x3D; new LinearGradientBrush(new Rectangle(0, 0, image.Width, image.Height), Color.Blue, Color.DarkRed, 1.2f, true);</span><br><span class="line"></span><br><span class="line">               if (_codetype !&#x3D; CodeType.Words)</span><br><span class="line">               &#123;</span><br><span class="line"></span><br><span class="line">                   for (int i &#x3D; 0; i &lt; checkCode.Length; i++)</span><br><span class="line">                   &#123;</span><br><span class="line"></span><br><span class="line">                       g.DrawString(checkCode.Substring(i, 1), font, brush, 2 + i * _jianju, 1);</span><br><span class="line"></span><br><span class="line">                   &#125;</span><br><span class="line"></span><br><span class="line">               &#125;</span><br><span class="line">               else</span><br><span class="line">               &#123;</span><br><span class="line"></span><br><span class="line">                   g.DrawString(checkCode, font, brush, 2, 2);</span><br><span class="line"></span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">               &#x2F;&#x2F; 画图片的前景噪音点 </span><br><span class="line"></span><br><span class="line">               for (int i &#x3D; 0; i &lt; 150; i++)</span><br><span class="line">               &#123;</span><br><span class="line"></span><br><span class="line">                   int x &#x3D; random.Next(image.Width);</span><br><span class="line"></span><br><span class="line">                   int y &#x3D; random.Next(image.Height);</span><br><span class="line"></span><br><span class="line">                   image.SetPixel(x, y, Color.FromArgb(random.Next()));</span><br><span class="line"></span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">               &#x2F;&#x2F; 画图片的波形滤镜效果 </span><br><span class="line"></span><br><span class="line">               if (_codetype !&#x3D; CodeType.Words)</span><br><span class="line">               &#123;</span><br><span class="line"></span><br><span class="line">                   image &#x3D; TwistImage(image, true, 3, 1);</span><br><span class="line"></span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">               &#x2F;&#x2F; 画图片的边框线 </span><br><span class="line"></span><br><span class="line">               g.DrawRectangle(new Pen(Color.Silver), 0, 0, image.Width - 1, image.Height - 1);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">               ms &#x3D; new System.IO.MemoryStream();</span><br><span class="line"></span><br><span class="line">               image.Save(ms, System.Drawing.Imaging.ImageFormat.Gif);</span><br><span class="line"></span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           finally</span><br><span class="line">           &#123;</span><br><span class="line"></span><br><span class="line">               g.Dispose();</span><br><span class="line"></span><br><span class="line">               image.Dispose();</span><br><span class="line"></span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           return ms;</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       #endregion</span><br></pre></td></tr></table></figure>





<p>   <strong>注册界面效果图</strong><br>   <img src="https://img-blog.csdnimg.cn/201906261230261.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDczMjI2MA==,size_16,color_FFFFFF,t_70" alt=""><br>   <strong>注册界面代码展示</strong><br>   短信验证码，用接口就能实现</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">TimeSpan dtTo &#x3D; new TimeSpan(0, 0, 60);&#x2F;&#x2F;设置计时器的开始时间</span><br><span class="line">       int value;&#x2F;&#x2F;用来存储随机数</span><br><span class="line">       public Enroll()</span><br><span class="line">       &#123;</span><br><span class="line">           InitializeComponent();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       &#x2F;&#x2F;获取短信验证码</span><br><span class="line">       private void CodeButton_Click(object sender, EventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           Regex rx &#x3D; new Regex(@&quot;^0&#123;0,1&#125;(13[0-9]|15[0-9]|15[0-9]|18[0-9]|17[0-9])[0-9]&#123;8&#125;$&quot;);</span><br><span class="line">           if (!rx.IsMatch(EnrollTel.Text))</span><br><span class="line">           &#123;</span><br><span class="line">               EnrollTel.Text &#x3D; &quot;&quot;;</span><br><span class="line">               MessageBox.Show(&quot;手机号格式不正确，请重新输入&quot;, &quot;提示&quot;, MessageBoxButtons.OK, MessageBoxIcon.Asterisk);</span><br><span class="line">           &#125;</span><br><span class="line">           else</span><br><span class="line">           &#123;</span><br><span class="line">               Random rad &#x3D; new Random();&#x2F;&#x2F;实例化随机数产生器rad；</span><br><span class="line">               value &#x3D; rad.Next(1000, 10000);&#x2F;&#x2F;用rad生成大于等于1000，小于等于9999的随机数；</span><br><span class="line">               Note.NoTe(EnrollTel.Text, value);</span><br><span class="line">               timer1.Start();</span><br><span class="line">               dtTo &#x3D; new TimeSpan(0, 0, 60);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       &#x2F;&#x2F;时间控件用来实现60秒倒计时</span><br><span class="line">       private void timer1_Tick_1(object sender, EventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           CodeButton.Enabled &#x3D; false;</span><br><span class="line">           dtTo &#x3D; dtTo.Subtract(new TimeSpan(0, 0, 1));&#x2F;&#x2F;每隔一秒减一</span><br><span class="line">           CodeButton.Text &#x3D; &quot;(&quot; + dtTo.Seconds.ToString() + &quot;)&quot; + &quot;重新获取&quot;;</span><br><span class="line"></span><br><span class="line">           if (dtTo.TotalSeconds &#x3D;&#x3D; 0.0)&#x2F;&#x2F;当倒计时完毕</span><br><span class="line">           &#123;</span><br><span class="line">               this.CodeButton.Enabled &#x3D; true;</span><br><span class="line">               CodeButton.Text &#x3D; &quot;点击获取验证码&quot;;</span><br><span class="line">               this.timer1.Stop();</span><br><span class="line">               timer1.Dispose();</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       &#x2F;&#x2F;注册按钮</span><br><span class="line">       private void FinishButton_Click(object sender, EventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           bool Bool &#x3D; Fac();</span><br><span class="line">           if (Bool)</span><br><span class="line">           &#123;</span><br><span class="line">               string type &#x3D; &quot;普通用户&quot;;</span><br><span class="line">               string sex &#x3D; &quot;&quot;;</span><br><span class="line">               if (RadioMan.Checked)&#x2F;&#x2F;判断单选按钮的text</span><br><span class="line">               &#123;</span><br><span class="line">                   sex &#x3D; RadioMan.Text;</span><br><span class="line">               &#125;</span><br><span class="line">               else if (RadioWoman.Checked)</span><br><span class="line">               &#123;</span><br><span class="line">                   sex &#x3D; RadioWoman.Text;</span><br><span class="line">               &#125;</span><br><span class="line">               string sql &#x3D; string.Format(&quot;insert into UserList values(&#39;&#123;0&#125;&#39;,&#39;&#123;1&#125;&#39;,&#39;&#123;2&#125;&#39;,&#39;&#123;3&#125;&#39;,&#39;&#123;4&#125;&#39;,&#39;&#123;5&#125;&#39;)&quot;, EnrollUser.Text, EnrollPwd.Text, sex, EnrollTel.Text, EnrollAddress.Text, type);</span><br><span class="line">               bool sqlinsert &#x3D; DBHelper.ExecuteNonQuery(sql);</span><br><span class="line">               if (sqlinsert)</span><br><span class="line">               &#123;</span><br><span class="line">                   DialogResult result &#x3D; MessageBox.Show(&quot;注册成功！&quot;, &quot;提示&quot;, MessageBoxButtons.OK, MessageBoxIcon.Question);</span><br><span class="line">                   this.Hide();</span><br><span class="line">                   Login LG &#x3D; new Login();</span><br><span class="line">                   LG.ShowDialog();</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           else</span><br><span class="line">           &#123;</span><br><span class="line">               return;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">       &#x2F;&#x2F;&#x2F; 用于注册界面里格式的判断</span><br><span class="line">       &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">       &#x2F;&#x2F;&#x2F; &lt;returns&gt;&lt;&#x2F;returns&gt;</span><br><span class="line">       private bool Fac()</span><br><span class="line">       &#123;</span><br><span class="line">           string sql &#x3D; string.Format(&quot;select * from UserList where UserID&#x3D;&#39;&#123;0&#125;&#39;&quot;, EnrollUser.Text);</span><br><span class="line">           SqlDataReader reader &#x3D; DBHelper.GetDataReader(sql);</span><br><span class="line">           if (EnrollUser.Text &#x3D;&#x3D; &quot;&quot;)</span><br><span class="line">           &#123;</span><br><span class="line">               MessageBox.Show(&quot;用户名不能为空！&quot;, &quot;提示&quot;, MessageBoxButtons.OK, MessageBoxIcon.Asterisk);</span><br><span class="line">               reader.Close();</span><br><span class="line">               return false;</span><br><span class="line">           &#125;</span><br><span class="line">           else if (EnrollPwd.Text &#x3D;&#x3D; &quot;&quot;)</span><br><span class="line">           &#123;</span><br><span class="line">               MessageBox.Show(&quot;请输入密码！&quot;, &quot;提示&quot;, MessageBoxButtons.OK, MessageBoxIcon.Asterisk);</span><br><span class="line">               reader.Close();</span><br><span class="line">               return false;</span><br><span class="line">           &#125;</span><br><span class="line">           else if (EnrollPwd.Text !&#x3D; EnrollPwdY.Text)</span><br><span class="line">           &#123;</span><br><span class="line">               MessageBox.Show(&quot;两次密码必须一样！&quot;, &quot;提示&quot;, MessageBoxButtons.OK, MessageBoxIcon.Asterisk);</span><br><span class="line">               reader.Close();</span><br><span class="line">               return false;</span><br><span class="line">           &#125;</span><br><span class="line">           else if (EnrollTel.Text &#x3D;&#x3D; &quot;&quot;)</span><br><span class="line">           &#123;</span><br><span class="line">               MessageBox.Show(&quot;请输入手机号！&quot;, &quot;提示&quot;, MessageBoxButtons.OK, MessageBoxIcon.Asterisk);</span><br><span class="line">               reader.Close();</span><br><span class="line">               return false;</span><br><span class="line">           &#125;</span><br><span class="line">           else if (EtxtValidCode.Text &#x3D;&#x3D; &quot;&quot;)</span><br><span class="line">           &#123;</span><br><span class="line">               MessageBox.Show(&quot;请输入验证码！&quot;, &quot;提示&quot;, MessageBoxButtons.OK, MessageBoxIcon.Asterisk);</span><br><span class="line">               reader.Close();</span><br><span class="line">               return false;</span><br><span class="line">           &#125;</span><br><span class="line">           else if (int.Parse(EtxtValidCode.Text) !&#x3D; value)</span><br><span class="line">           &#123;</span><br><span class="line">               MessageBox.Show(&quot;请输入正确的验证码！&quot;, &quot;提示&quot;, MessageBoxButtons.OK, MessageBoxIcon.Asterisk);</span><br><span class="line">               reader.Close();</span><br><span class="line">               return false;</span><br><span class="line">           &#125;</span><br><span class="line">           else if (reader.Read())</span><br><span class="line">           &#123;</span><br><span class="line">               DialogResult result &#x3D; MessageBox.Show(&quot;此用户已存在，是否前往登录？&quot;, &quot;提示&quot;, MessageBoxButtons.YesNo, MessageBoxIcon.Question);</span><br><span class="line">               if (result &#x3D;&#x3D; DialogResult.Yes)</span><br><span class="line">               &#123;</span><br><span class="line">                   Login LG &#x3D; new Login();</span><br><span class="line">                   LG.ShowDialog();</span><br><span class="line">                   reader.Close();</span><br><span class="line">                   this.Close();</span><br><span class="line">                   return false;</span><br><span class="line">               &#125;</span><br><span class="line">               else</span><br><span class="line">               &#123;</span><br><span class="line">                   reader.Close();</span><br><span class="line">                   return false;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           else</span><br><span class="line">           &#123;</span><br><span class="line">               reader.Close();</span><br><span class="line">               return true;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       &#x2F;&#x2F;窗体加载事件</span><br><span class="line">       private void Enroll_Load(object sender, EventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           CodeButton.Text &#x3D; &quot;点击获取验证码&quot;;</span><br><span class="line">           timer1.Interval &#x3D; 1000;&#x2F;&#x2F;设置每次间隔一秒</span><br><span class="line"></span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p> <strong>忘记密码界面效果图</strong><br><img src="https://img-blog.csdnimg.cn/20190626124348229.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDczMjI2MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><strong>下面为用户界面的展示</strong><br>简单介绍一下：由于菜品是有很多的而且不确定数量，所以必须动态加载，不能拖图片控件等。<br>用户功能实现思路：首先要知道每个用户只能看自己的，所以在登录时候就必须用一个东西接收用户输入的名字，以便在主界面显示出与该用户相匹配的数据。<br><img src="https://img-blog.csdnimg.cn/20190626124621298.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDczMjI2MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><strong>购物车界面</strong><br>购物车首先要有一个购物车表用来存储用户添加的商品，当用户结账以后，购物车表中该用户的信息就应全部清除。然后为该用户生成订单（存入信息到订单表），并将用户购买的商品存入订单详情表中。<br><img src="https://img-blog.csdnimg.cn/20190626130222796.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDczMjI2MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><strong>动态加载菜品代码展示</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">private void XMB_Load(object sender, EventArgs e)</span><br><span class="line">        &#123;</span><br><span class="line">            &#x2F;*SetStyle(ControlStyles.UserPaint, true);</span><br><span class="line">            SetStyle(ControlStyles.AllPaintingInWmPaint, true); &#x2F;&#x2F; 禁止擦除背景.</span><br><span class="line">            SetStyle(ControlStyles.DoubleBuffer, true); &#x2F;&#x2F; 双缓冲*&#x2F;</span><br><span class="line">            linke_热菜.LinkColor &#x3D; Color.Gray;</span><br><span class="line">            Win32.AnimateWindow(this.Handle, 500, Win32.AW_CENTER);&#x2F;&#x2F;窗体出现效果</span><br><span class="line">            Order_pl.Visible &#x3D; false;</span><br><span class="line">            Or_panel1.Visible &#x3D; false;&#x2F;&#x2F;隐藏订单控件</span><br><span class="line">            menu_all_全部.AutoScroll &#x3D; true;&#x2F;&#x2F;添加滚动条</span><br><span class="line">            this.toolStripStatusLabel1.Font &#x3D; new Font(&quot;微软雅黑&quot;, 12, FontStyle.Bold);</span><br><span class="line">            toolStripStatusLabel1.Text &#x3D; string.Format(&quot;欢迎“&#123;0&#125;”使用Sweet点餐系统！                                               &quot;, Saveusername.name);</span><br><span class="line">            this.timer2.Start();</span><br><span class="line"></span><br><span class="line">            string sql &#x3D; &quot;select * from Food_table&quot;;</span><br><span class="line">            DataSet ds &#x3D; DBHelper.GetDataSet(sql);</span><br><span class="line">            int xx &#x3D; 0;</span><br><span class="line">            int yy &#x3D; 0;</span><br><span class="line">            for (int i &#x3D; 0; i &lt; ds.Tables[0].Rows.Count; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                Label FoodName &#x3D; new Label();</span><br><span class="line">                Label FoodPrice &#x3D; new Label();</span><br><span class="line">                PictureBox picture &#x3D; new PictureBox();</span><br><span class="line">                Button button &#x3D; new Button();&#x2F;&#x2F;创建控件</span><br><span class="line">                FoodName.Name &#x3D; &quot;FoodName_&quot; + i;</span><br><span class="line">                FoodPrice.Name &#x3D; &quot;FoodPrice_&quot; + i;</span><br><span class="line">                picture.Name &#x3D; &quot;picture_&quot; + i;</span><br><span class="line">                button.Name &#x3D; ds.Tables[0].Rows[i][&quot;FoodID&quot;].ToString();&#x2F;&#x2F;加入购物车按钮命名为菜品表的FoodID</span><br><span class="line">                FoodName.Text &#x3D; ds.Tables[0].Rows[i][&quot;FoodName&quot;].ToString();</span><br><span class="line">                FoodPrice.Text &#x3D; &quot;¥&quot; + ds.Tables[0].Rows[i][&quot;FoodPrice&quot;].ToString() + &quot;&#x2F;份&quot;;&#x2F;&#x2F;控件text属性赋值</span><br><span class="line">                button.Text &#x3D; &quot;加入购物车&quot;;</span><br><span class="line">                FoodName.AutoSize &#x3D; true;</span><br><span class="line">                FoodPrice.AutoSize &#x3D; true;</span><br><span class="line">                button.AutoSize &#x3D; true;</span><br><span class="line">                FoodName.Font &#x3D; new Font(&quot;微软雅黑&quot;, 11);</span><br><span class="line">                FoodPrice.Font &#x3D; new Font(&quot;微软雅黑&quot;, 11);</span><br><span class="line">                button.Font &#x3D; new Font(&quot;微软雅黑&quot;, 6);</span><br><span class="line">                button.BackColor &#x3D; Color.Gray;</span><br><span class="line">                button.ForeColor &#x3D; Color.Transparent;</span><br><span class="line">                button.FlatStyle &#x3D; FlatStyle.Flat;</span><br><span class="line">                button.Size &#x3D; new Size(60, 10);</span><br><span class="line">                picture.Location &#x3D; new Point(100 * xx, 20 + yy);</span><br><span class="line">                FoodName.Location &#x3D; new Point(100 * xx, 100 + yy);</span><br><span class="line">                FoodPrice.Location &#x3D; new Point(100 * xx, 120 + yy);</span><br><span class="line">                button.Location &#x3D; new Point(100 * xx, 140 + yy);&#x2F;&#x2F;控件定位</span><br><span class="line">                picture.Image &#x3D; Image.FromFile(Application.StartupPath + @&quot;\FoodPhoto\&quot; + ds.Tables[0].Rows[i][&quot;PhotoName&quot;].ToString());&#x2F;&#x2F;显示图片，路径为可执行文件所在文件夹的FoodPhoto文件夹内的图片</span><br><span class="line">                picture.SizeMode &#x3D; PictureBoxSizeMode.StretchImage;</span><br><span class="line">                picture.Size &#x3D; new Size(150, 80);</span><br><span class="line">                picture.BorderStyle &#x3D; BorderStyle.FixedSingle;</span><br><span class="line">                button.Cursor &#x3D; Cursors.Hand;</span><br><span class="line">                button.Click +&#x3D; new EventHandler(this.Button_Click);</span><br><span class="line">                menu_all_全部.Controls.Add(FoodName);</span><br><span class="line">                menu_all_全部.Controls.Add(FoodPrice);</span><br><span class="line">                menu_all_全部.Controls.Add(picture);</span><br><span class="line">                menu_all_全部.Controls.Add(button);&#x2F;&#x2F;把控件绑定到panel中</span><br><span class="line">                xx++;</span><br><span class="line">                if (xx++ &gt;&#x3D; 4)</span><br><span class="line">                &#123;</span><br><span class="line">                    xx &#x3D; 0;</span><br><span class="line">                    yy +&#x3D; 180;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p><strong>动态加载菜品解决窗体控件闪烁问题代码展示</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">protected override CreateParams CreateParams&#x2F;&#x2F;解决窗体控件闪烁问题</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            get</span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                CreateParams cp &#x3D; base.CreateParams;</span><br><span class="line"></span><br><span class="line">                cp.ExStyle |&#x3D; 0x02000000;</span><br><span class="line"></span><br><span class="line">                return cp;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p><strong>加入购物车按钮代码展示</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#region 购物车</span><br><span class="line">       private void 购物车_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">            &#x2F;&#x2F; 禁止用户改变DataGridView1的所有列的列宽</span><br><span class="line">           dataGridView1.AllowUserToResizeColumns &#x3D; false;</span><br><span class="line">           &#x2F;&#x2F;禁止用户改变DataGridView1所有行的行高</span><br><span class="line">           dataGridView1.AllowUserToResizeRows &#x3D; false;</span><br><span class="line">           dataGridView1.Columns[0].ReadOnly &#x3D; true; &#x2F;&#x2F;禁止用户编辑第一列</span><br><span class="line">           dataGridView1.Columns[1].ReadOnly &#x3D; true; &#x2F;&#x2F;禁止用户编辑第二列</span><br><span class="line">           dataGridView1.Columns[2].ReadOnly &#x3D; true;&#x2F;&#x2F;禁止用户编辑第三列</span><br><span class="line">           this.dataGridView1.AllowUserToResizeColumns &#x3D; false; &#x2F;&#x2F;禁止用户拖动标题宽度</span><br><span class="line">           dataGridView1.AutoGenerateColumns &#x3D; false;&#x2F;&#x2F;取消自动生成列</span><br><span class="line">           dataGridView1.RowHeadersVisible &#x3D; false; &#x2F;&#x2F;隐藏前面空白选择部分     </span><br><span class="line">           string sql &#x3D; string.Format(&quot;select FoodName,ShoppingCount,ShoppingPrice,ShoppingID from Food_table join Shopping_table on Food_table.FoodID&#x3D;Shopping_table.FoodID join UserList on &#39;&#123;0&#125;&#39;&#x3D;Shopping_table.UserID where UserList.UserID&#x3D;&#39;&#123;1&#125;&#39;&quot;, Saveusername.name,Saveusername.name);&#x2F;&#x2F;三表查询</span><br><span class="line">           dataGridView1.DataSource &#x3D; DBHelper.GetDataSet(sql).Tables[0];</span><br><span class="line">           double SumPrice &#x3D; 0;&#x2F;&#x2F;用来存储总金额</span><br><span class="line">           if (DBHelper.GetDataSet(sql).Tables[0].Rows.Count &gt; 0)</span><br><span class="line">           &#123;</span><br><span class="line">               for (int i &#x3D; 0; i &lt; DBHelper.GetDataSet(sql).Tables[0].Rows.Count; i++)</span><br><span class="line">               &#123;</span><br><span class="line">                   SumPrice +&#x3D; double.Parse(DBHelper.GetDataSet(sql).Tables[0].Rows[i][2].ToString());</span><br><span class="line">               &#125;</span><br><span class="line">               Money_label.Text &#x3D; &quot;¥&quot; + SumPrice.ToString() + &quot;元&quot;;</span><br><span class="line">           &#125;</span><br><span class="line">           dataGridView1.ClearSelection(); &#x2F;&#x2F;取消默认选中</span><br><span class="line">           if (show_shopping_pl.Visible &#x3D;&#x3D; true)</span><br><span class="line">           &#123;</span><br><span class="line">               show_shopping_pl.Visible &#x3D; false;</span><br><span class="line">           &#125;</span><br><span class="line">           else</span><br><span class="line">           &#123;</span><br><span class="line">               show_shopping_pl.Visible &#x3D; true;</span><br><span class="line">           &#125;</span><br><span class="line">           if (Or_panel1.Visible &#x3D;&#x3D; true)</span><br><span class="line">           &#123;</span><br><span class="line">               Or_panel1.Visible &#x3D; false;</span><br><span class="line">           &#125;</span><br><span class="line">           if (Order_pl.Visible &#x3D;&#x3D; true)</span><br><span class="line">           &#123;</span><br><span class="line">               Order_pl.Visible &#x3D; false;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       &#x2F;&#x2F;清空购物车</span><br><span class="line">       private void delete_label_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           DialogResult result &#x3D; MessageBox.Show(&quot;是否清空购物车&quot;, &quot;提示信息&quot;, MessageBoxButtons.OKCancel, MessageBoxIcon.Asterisk);</span><br><span class="line">           if (result &#x3D;&#x3D; DialogResult.OK)</span><br><span class="line">           &#123;</span><br><span class="line">               string sql &#x3D; string.Format(&quot;delete from Shopping_table where UserID&#x3D;&#39;&#123;0&#125;&#39;&quot;, Saveusername.name);</span><br><span class="line">               if (DBHelper.ExecuteNonQuery(sql))</span><br><span class="line">               &#123;</span><br><span class="line">                   sql &#x3D; string.Format(&quot;select FoodName,ShoppingCount,ShoppingPrice,ShoppingID from Food_table join Shopping_table on Food_table.FoodID&#x3D;Shopping_table.FoodID join UserList on &#39;&#123;0&#125;&#39;&#x3D;Shopping_table.UserID &quot;, Saveusername.name);</span><br><span class="line">                   dataGridView1.DataSource &#x3D; DBHelper.GetDataSet(sql);</span><br><span class="line">                   dataGridView1.AllowUserToAddRows &#x3D; false;</span><br><span class="line">                   Money_label.Text &#x3D; &quot;¥0元&quot;;</span><br><span class="line">                   MessageBox.Show(&quot;成功清空购物车！&quot;, &quot;提示&quot;, MessageBoxButtons.OK);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       </span><br><span class="line">       #endregion</span><br></pre></td></tr></table></figure>

<p><strong>主界面结账功能界面</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20190626125543900.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDczMjI2MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> <img src="https://img-blog.csdnimg.cn/20190626125613118.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDczMjI2MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><strong>结账部分代码展示</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> private void Yes_Order_Load(object sender, EventArgs e)</span><br><span class="line">        &#123;</span><br><span class="line">            Or_label1.Text &#x3D; &quot;[&quot;+Saveusername.name+&quot;]&quot; + &quot;&gt;确认购买&quot;;</span><br><span class="line">            dataGridView1.RowHeadersVisible &#x3D; false; &#x2F;&#x2F;隐藏前面空白选择部分</span><br><span class="line">            &#x2F;&#x2F;                                         &#x2F;&#x2F; 禁止用户改变DataGridView1的所有列的列宽</span><br><span class="line">            &#x2F;&#x2F;dataGridView1.AllowUserToResizeColumns &#x3D; false;</span><br><span class="line">            &#x2F;&#x2F;&#x2F;&#x2F;禁止用户改变DataGridView1所有行的行高</span><br><span class="line">            &#x2F;&#x2F;dataGridView1.AllowUserToResizeRows &#x3D; false;</span><br><span class="line">            dataGridView1.Columns[0].ReadOnly &#x3D; true; &#x2F;&#x2F;禁止用户编辑第一列</span><br><span class="line">            dataGridView1.Columns[1].ReadOnly &#x3D; true; &#x2F;&#x2F;禁止用户编辑第二列</span><br><span class="line">            dataGridView1.Columns[2].ReadOnly &#x3D; true;&#x2F;&#x2F;禁止用户编辑第三列</span><br><span class="line">            this.dataGridView1.AllowUserToResizeColumns &#x3D; false; &#x2F;&#x2F;禁止用户拖动标题宽度</span><br><span class="line">            dataGridView1.AutoGenerateColumns &#x3D; false;&#x2F;&#x2F;取消自动生成列</span><br><span class="line">            dataGridView1.RowHeadersVisible &#x3D; false; &#x2F;&#x2F;隐藏前面空白选择部分     </span><br><span class="line">            string sql &#x3D; string.Format(&quot;select FoodName,ShoppingCount,ShoppingPrice,ShoppingID from Food_table join Shopping_table on Food_table.FoodID&#x3D;Shopping_table.FoodID join UserList on &#39;&#123;0&#125;&#39;&#x3D;Shopping_table.UserID where UserList.UserID&#x3D;&#39;&#123;1&#125;&#39;&quot;, Saveusername.name,Saveusername.name);&#x2F;&#x2F;三表查询</span><br><span class="line">            dataGridView1.DataSource &#x3D; DBHelper.GetDataSet(sql).Tables[0];</span><br><span class="line">             SumPrice &#x3D; 0;&#x2F;&#x2F;用来存储总金额</span><br><span class="line">            if (DBHelper.GetDataSet(sql).Tables[0].Rows.Count &gt; 0)</span><br><span class="line">            &#123;</span><br><span class="line">                for (int i &#x3D; 0; i &lt; DBHelper.GetDataSet(sql).Tables[0].Rows.Count; i++)</span><br><span class="line">                &#123;</span><br><span class="line">                    SumPrice +&#x3D; double.Parse(DBHelper.GetDataSet(sql).Tables[0].Rows[i][2].ToString());</span><br><span class="line">                &#125;</span><br><span class="line">                Money_label.Text &#x3D; &quot;¥&quot; + SumPrice.ToString() + &quot;元&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">            dataGridView1.ClearSelection(); &#x2F;&#x2F;取消默认选中</span><br><span class="line">            string sql_1 &#x3D; string.Format(&quot;select * from UserList where UserID&#x3D;&#39;&#123;0&#125;&#39;&quot;,Saveusername.name);</span><br><span class="line">            DataSet ds &#x3D; DBHelper.GetDataSet(sql_1);</span><br><span class="line">            Name_label.Text &#x3D; ds.Tables[0].Rows[0][&quot;UserID&quot;].ToString()+&quot;:&quot;;</span><br><span class="line">            Tel_label.Text &#x3D; ds.Tables[0].Rows[0][&quot;UserTel&quot;].ToString();</span><br><span class="line">            Address_label.Text &#x3D; ds.Tables[0].Rows[0][&quot;UserAddress&quot;].ToString();</span><br><span class="line">            Yes_Money_label.Text &#x3D; Money_label.Text;</span><br><span class="line">        &#125;</span><br><span class="line">        private void Yes_pay_btn_Click(object sender, EventArgs e)</span><br><span class="line">        &#123;</span><br><span class="line">            if (Address_label.Text&#x3D;&#x3D;&quot;&quot;)</span><br><span class="line">            &#123;</span><br><span class="line">                MessageBox.Show(&quot;地址信息不完整，请填写完整！&quot;, &quot;提示&quot;, MessageBoxButtons.OK, MessageBoxIcon.Information);</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line">            string Order_Data &#x3D; DateTime.Now.ToString(&quot;yyyy-MM-dd hh:mm:ss&quot;); &#x2F;&#x2F;下单日期</span><br><span class="line">            string OrderNumber &#x3D; DateTime.Now.ToString(&quot;yyyyMMddhhmmss&quot;);&#x2F;&#x2F;订单编号</span><br><span class="line">            string sql &#x3D; string.Format(&quot;select * from Shopping_table where UserID&#x3D;&#39;&#123;0&#125;&#39;&quot;,Saveusername.name);&#x2F;&#x2F;查询购物车表</span><br><span class="line">            DataTable table_shopping &#x3D; DBHelper.GetDataSet(sql).Tables[0];</span><br><span class="line">            if (table_shopping.Rows.Count&gt;0)&#x2F;&#x2F;购物车有数据就创建订单</span><br><span class="line">            &#123;</span><br><span class="line">               string sql_order &#x3D; string.Format(&quot;insert into Order_table values(&#39;&#123;0&#125;&#39;,&#39;&#123;1&#125;&#39;,&#39;&#123;2&#125;&#39;,&#39;&#123;3&#125;&#39;,&#39;&#123;4&#125;&#39;,&#39;&#123;5&#125;&#39;)&quot;,OrderNumber,Saveusername.name,SumPrice,Address_label.Text,Order_Data,Tel_label.Text);&#x2F;&#x2F;创建订单</span><br><span class="line">               string sql_state &#x3D; string.Format(&quot;insert into OrderState_table values(&#39;&#123;0&#125;&#39;,&#39;&#123;1&#125;&#39;)&quot;,OrderNumber,&quot;等待确认&quot;);&#x2F;&#x2F;订单状态</span><br><span class="line">                if (DBHelper.ExecuteNonQuery(sql_order)&amp;&amp;DBHelper.ExecuteNonQuery(sql_state))</span><br><span class="line">                &#123;</span><br><span class="line">                    sql_order &#x3D; string.Format(&quot;select top 1 * from Order_table where UserID&#x3D;&#39;&#123;0&#125;&#39; order by OrderID desc&quot;,Saveusername.name);</span><br><span class="line">                    DataTable table_order &#x3D; DBHelper.GetDataTable(sql_order);</span><br><span class="line">                    for (int i &#x3D; 0; i &lt; table_shopping.Rows.Count; i++)&#x2F;&#x2F;把数据逐条插入订单详情表</span><br><span class="line">                    &#123;</span><br><span class="line">string sql_datailde &#x3D; string.Format(&quot;insert into Datailedorder_table values(&#39;&#123;0&#125;&#39;,&#39;&#123;1&#125;&#39;,&#39;&#123;2&#125;&#39;,&#39;&#123;3&#125;&#39;)&quot;, int.Parse(table_shopping.Rows[i][&quot;FoodID&quot;].ToString()),int.Parse(table_shopping.Rows[i][&quot;ShoppingCount&quot;].ToString()),double.Parse(table_shopping.Rows[i][&quot;ShoppingPrice&quot;].ToString()),int.Parse(table_order.Rows[0][&quot;OrderID&quot;].ToString()));</span><br><span class="line">                        &#x2F;&#x2F;try</span><br><span class="line">                        &#x2F;&#x2F;&#123;</span><br><span class="line">DBHelper.ExecuteNonQuery(sql_datailde);</span><br><span class="line">                        &#x2F;&#x2F;&#125;</span><br><span class="line">                       &#x2F;* catch (Exception)</span><br><span class="line">                        &#123;</span><br><span class="line"></span><br><span class="line">                            MessageBox.Show(&quot;异常&quot;);</span><br><span class="line">                            return</span><br><span class="line">                        &#125;*&#x2F;</span><br><span class="line">                        </span><br><span class="line">                    &#125;</span><br><span class="line">                    string sql_delete &#x3D; string.Format(&quot;delete from Shopping_table where UserID&#x3D;&#39;&#123;0&#125;&#39;&quot;,Saveusername.name);</span><br><span class="line">                    DBHelper.ExecuteNonQuery(sql_delete);&#x2F;&#x2F;创建订单后清空购物车</span><br><span class="line">                   DialogResult result&#x3D; MessageBox.Show(&quot;支付成功&quot;, &quot;提示&quot;, MessageBoxButtons.OK, MessageBoxIcon.Information);</span><br><span class="line">                    if (result&#x3D;&#x3D;DialogResult.OK)</span><br><span class="line">                    &#123;</span><br><span class="line">                 string sql_select &#x3D; string.Format(&quot;select * from Shopping_table where UserID&#x3D;&#39;&#123;0&#125;&#39;&quot;,Saveusername.name);</span><br><span class="line">                    dataGridView1.DataSource &#x3D; DBHelper.GetDataSet(sql_select).Tables[0];</span><br><span class="line">                        Money_label.Text &#x3D; &quot;¥0元&quot;;</span><br><span class="line">                        Yes_Money_label.Text &#x3D; &quot;¥0元&quot;;</span><br><span class="line">                        XMB.GetXMB.Money_label.Text &#x3D; &quot;¥0元&quot;;</span><br><span class="line">                    Order_Form order_ &#x3D; new Order_Form();</span><br><span class="line">                    XMB.GetXMB.Or_from(order_);</span><br><span class="line">                        return;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            else</span><br><span class="line">            &#123;</span><br><span class="line">                MessageBox.Show(&quot;未选择菜品&quot;, &quot;提示&quot;, MessageBoxButtons.OK, MessageBoxIcon.Asterisk);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p><strong>订单功能界面</strong><br>点击订单，出现订单详情<br><img src="https://img-blog.csdnimg.cn/20190626130130789.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDczMjI2MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20190626130444317.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDczMjI2MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><strong>订单功能部分代码</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">  private void Order_Form_Load(object sender, EventArgs e)</span><br><span class="line">        &#123;</span><br><span class="line">            OR_panel.AutoScroll &#x3D; true;&#x2F;&#x2F;添加滚动条</span><br><span class="line">            int xx &#x3D; 0;</span><br><span class="line">            int yy &#x3D; 0;</span><br><span class="line">            string sql &#x3D; string.Format(&quot;select * from Order_table where UserID&#x3D;&#39;&#123;0&#125;&#39;&quot;,Saveusername.name);</span><br><span class="line">            DataTable Or_table &#x3D; DBHelper.GetDataTable(sql);</span><br><span class="line">DataTable State &#x3D; DBHelper.GetDataTable(string.Format(&quot;select OrderState from OrderState_table join Order_table on Order_table.OrderNumber&#x3D;OrderState_table.OrderNumber where Order_table.UserID&#x3D;&#39;&#123;0&#125;&#39;&quot;,Saveusername.name));</span><br><span class="line">            for (int i &#x3D; 0; i &lt; Or_table.Rows.Count; i++)</span><br><span class="line">            &#123;  </span><br><span class="line">                Label OrderNumber &#x3D; new Label();&#x2F;&#x2F;编号</span><br><span class="line">                Label ShoppingPrice &#x3D; new Label();&#x2F;&#x2F;价格</span><br><span class="line">                Label SaleDate &#x3D; new Label();&#x2F;&#x2F;时间</span><br><span class="line">                Label OrderState &#x3D; new Label();&#x2F;&#x2F;状态</span><br><span class="line">                Label sweet &#x3D; new Label();</span><br><span class="line">                Panel panel &#x3D; new Panel();</span><br><span class="line">                PictureBox Db &#x3D; new PictureBox(); &#x2F;&#x2F;实例化一个控件</span><br><span class="line">                Db.Name &#x3D; &quot;Db_PictureBox&quot; + i;&#x2F;&#x2F;设定名称</span><br><span class="line">                OrderNumber.Name &#x3D; &quot;Label&quot; + i;</span><br><span class="line">                ShoppingPrice.Name &#x3D; &quot;Label&quot; + i;</span><br><span class="line">                SaleDate.Name &#x3D; &quot;Label&quot; + i;</span><br><span class="line">                OrderState.Name &#x3D; &quot;Label&quot; + i;</span><br><span class="line">                sweet.Name &#x3D; &quot;Label&quot; + i;</span><br><span class="line">                panel.Name &#x3D; &quot;Panel&quot; + i;&#x2F;&#x2F;设定名称</span><br><span class="line">                panel.Text &#x3D; Or_table.Rows[i][&quot;OrderID&quot;].ToString();&#x2F;&#x2F;把订单ID赋给控件的Text，以便取消订单</span><br><span class="line">                SaleDate.Text &#x3D; Or_table.Rows[i][&quot;SaleDate&quot;].ToString();</span><br><span class="line">                ShoppingPrice.Text &#x3D; &quot; ¥ &quot; +  Or_table.Rows[i][&quot;ShoppingPrice&quot;].ToString();</span><br><span class="line">                OrderNumber.Text &#x3D; &quot;订单编号： &quot; + Or_table.Rows[i][&quot;OrderNumber&quot;].ToString();</span><br><span class="line">                sweet.Text &#x3D; &quot;Sweet点餐&quot;;</span><br><span class="line">                OrderState.Text &#x3D; State.Rows[i][&quot;OrderState&quot;].ToString();</span><br><span class="line">                sweet.Location &#x3D; new Point(150,30);</span><br><span class="line">                ShoppingPrice.Location &#x3D; new Point(480,30);</span><br><span class="line">                OrderState.Location &#x3D; new Point(595,30);</span><br><span class="line">                SaleDate.Location &#x3D; new Point(150,70);</span><br><span class="line">                OrderNumber.Location &#x3D; new Point(450,70);</span><br><span class="line">                Db.Location &#x3D; new Point(15, 10 + yy);&#x2F;&#x2F;设定位置</span><br><span class="line">                panel.Location &#x3D; new Point(5, 0 + yy);&#x2F;&#x2F;设定位置</span><br><span class="line">                sweet.AutoSize &#x3D; true;</span><br><span class="line">                OrderState.AutoSize &#x3D; true;</span><br><span class="line">                ShoppingPrice.AutoSize &#x3D; true;</span><br><span class="line">                SaleDate.AutoSize &#x3D; true;</span><br><span class="line">                OrderNumber.AutoSize &#x3D; true;</span><br><span class="line">                Db.Image &#x3D; Image.FromFile(Application.StartupPath + @&quot;\FoodPhoto\&quot; + &quot;sezhi.png&quot;);</span><br><span class="line">                Db.SizeMode &#x3D; PictureBoxSizeMode.StretchImage; &#x2F;&#x2F;设定图像如何显示</span><br><span class="line">                sweet.Font &#x3D; new Font(&quot;微软雅黑&quot;, 11);</span><br><span class="line">                OrderNumber.Font &#x3D; new Font(&quot;微软雅黑&quot;, 11);</span><br><span class="line">                OrderState.Font &#x3D; new Font(&quot;微软雅黑&quot;, 11);</span><br><span class="line">                ShoppingPrice.Font &#x3D; new Font(&quot;微软雅黑&quot;, 11);</span><br><span class="line">                SaleDate.Font &#x3D; new Font(&quot;微软雅黑&quot;, 11);</span><br><span class="line">                Db.Size &#x3D; new Size(80, 80);</span><br><span class="line">                panel.Size &#x3D; new Size(683, 100);</span><br><span class="line">                Db.BorderStyle &#x3D; BorderStyle.FixedSingle; &#x2F;&#x2F;设置边框样式</span><br><span class="line">                panel.BorderStyle &#x3D; BorderStyle.FixedSingle; &#x2F;&#x2F;设置边框样式</span><br><span class="line">                panel.BackColor &#x3D; Color.White;</span><br><span class="line">                SaleDate.ForeColor &#x3D; Color.Red;</span><br><span class="line">                ShoppingPrice.ForeColor &#x3D; Color.Red;</span><br><span class="line">                OrderNumber.ForeColor &#x3D; Color.Green;</span><br><span class="line">                OrderState.ForeColor &#x3D; Color.Green;</span><br><span class="line">                panel.Cursor &#x3D; Cursors.Hand;</span><br><span class="line">                OR_panel.Controls.Add(Db);</span><br><span class="line">                OR_panel.Controls.Add(panel);</span><br><span class="line">                panel.Controls.Add(OrderState);</span><br><span class="line">                panel.Controls.Add(sweet);</span><br><span class="line">                panel.Controls.Add(OrderNumber);</span><br><span class="line">                panel.Controls.Add(SaleDate);</span><br><span class="line">                panel.Controls.Add(ShoppingPrice);</span><br><span class="line">                panel.Click +&#x3D; new EventHandler(this.panel1_MouseClick); &#x2F;&#x2F;添加单击事件</span><br><span class="line">                panel.MouseEnter +&#x3D; new EventHandler(this.panel1_MouseEnter); &#x2F;&#x2F;添加单击事件</span><br><span class="line">                panel.MouseLeave +&#x3D; new EventHandler(this.panel1_MouseLeave); &#x2F;&#x2F;添加单击事件</span><br><span class="line">                xx++;</span><br><span class="line">                if (xx++ &gt;&#x3D; 1)</span><br><span class="line">                &#123;</span><br><span class="line">                    yy +&#x3D; 110;</span><br><span class="line">                    &#x2F;&#x2F;aa +&#x3D; 10;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p><strong>接下来是管理员界面展示</strong><br>1.菜品管理界面<br><img src="https://img-blog.csdnimg.cn/20190626131407689.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDczMjI2MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20190626131449980.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDczMjI2MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20190626131511463.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDczMjI2MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><strong>菜品管理添加菜品关键代码</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">private void Food_in_tbn_Click(object sender, EventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           if (Fag() &#x3D;&#x3D; false)</span><br><span class="line">               return;</span><br><span class="line">           string FilePath &#x3D; Application.StartupPath + @&quot;\FoodPhoto&quot;;&#x2F;&#x2F;获取可执行文件所在位置的FoodPhoto文件夹路径</span><br><span class="line">           if (Directory.Exists(FilePath) &#x3D;&#x3D; false)</span><br><span class="line">           &#123;</span><br><span class="line">               &#x2F;&#x2F;判断文件夹是否存在如果不存在创建文件夹</span><br><span class="line">               Directory.CreateDirectory(FilePath);&#x2F;&#x2F;创建文件夹</span><br><span class="line">           &#125;</span><br><span class="line">           string FileName &#x3D; DateTime.Now.ToString(&quot;yyyyMMddhhmmss&quot;) + new Random().Next(1000, 9999);</span><br><span class="line">           &#x2F;&#x2F;以当前时间和1000到9999的随机数合起来作为文件的名字</span><br><span class="line">           FileName +&#x3D; nj.Substring(nj.LastIndexOf(&quot;.&quot;));&#x2F;&#x2F;截取图片的后缀名</span><br><span class="line">           File.Copy(nj, FilePath + @&quot;\&quot; + FileName);&#x2F;&#x2F;把图片复制到FoodPhoto文件夹</span><br><span class="line">           string SQLst &#x3D; string.Format(&quot;insert into Food_table values(&#39;&#123;0&#125;&#39;,&#39;&#123;1&#125;&#39;,&#39;&#123;2&#125;&#39;,&#39;&#123;3&#125;&#39;)&quot;, Add_Food_tb.Text,Add_money_tb.Text,Add_type_ctb.Text, FileName);</span><br><span class="line">           if (DBHelper.ExecuteNonQuery(SQLst))</span><br><span class="line">           &#123;</span><br><span class="line">               MessageBox.Show(&quot;菜品添加成功&quot;, &quot;提示&quot;, MessageBoxButtons.OK, MessageBoxIcon.Information);</span><br><span class="line">           &#125;</span><br><span class="line">           else</span><br><span class="line">           &#123;</span><br><span class="line">               MessageBox.Show(&quot;保存失败&quot;, &quot;错误&quot;, MessageBoxButtons.OK, MessageBoxIcon.Error);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       public static string nj;</span><br><span class="line">       public static string name;</span><br><span class="line">       private void pictureBox1_Click(object sender, EventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           &#x2F;&#x2F;打开资源管理器选择图片</span><br><span class="line">           OpenFileDialog openFileDialog1 &#x3D; new OpenFileDialog();</span><br><span class="line">           nj &#x3D; &quot;&quot;;</span><br><span class="line">           name &#x3D; &quot;&quot;;</span><br><span class="line">           if (openFileDialog1.ShowDialog() &#x3D;&#x3D; DialogResult.OK)</span><br><span class="line">           &#123;</span><br><span class="line">               nj &#x3D; openFileDialog1.FileName;</span><br><span class="line">               pictureBox1.Image &#x3D; Image.FromFile(nj);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p>2.订单管理界面<br>主要实现思路：动态加载控件，控件定位，查询数据库，修改表信息<br><img src="https://img-blog.csdnimg.cn/20190626131739826.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDczMjI2MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>3.销售统计界面<br><img src="https://img-blog.csdnimg.cn/20190626132038662.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDczMjI2MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><strong>点击确认订单后会生成一个订单，效果图如下:</strong><br><img src="https://img-blog.csdnimg.cn/20190626132526308.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDczMjI2MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>代码展示</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">private void Button_Click(object sender, EventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           Button button &#x3D; (Button)sender;&#x2F;&#x2F;将触发此事件的对象转换为该对象</span><br><span class="line">           OrderID &#x3D; int.Parse(button.Name.ToString());</span><br><span class="line">           string FilePath &#x3D; @&quot;D:\订单票据&quot;;&#x2F;&#x2F;获取可执行文件所在位置的FoodPhoto文件夹路径</span><br><span class="line">           if (Directory.Exists(FilePath) &#x3D;&#x3D; false)</span><br><span class="line">           &#123;</span><br><span class="line">               &#x2F;&#x2F;判断文件夹是否存在如果不存在创建文件夹</span><br><span class="line">               Directory.CreateDirectory(FilePath);&#x2F;&#x2F;创建文件夹</span><br><span class="line">           &#125;</span><br><span class="line">           string sql_12 &#x3D; string.Format(&quot;select * from Order_table where OrderID&#x3D;&#39;&#123;0&#125;&#39;&quot;, OrderID);</span><br><span class="line">           DataTable piao &#x3D; DBHelper.GetDataTable(sql_12);</span><br><span class="line">           for (int i &#x3D; 0; i &lt; piao.Rows.Count; i++)</span><br><span class="line">           &#123;</span><br><span class="line">               StreamWriter sw &#x3D; new StreamWriter(@&quot;D:\订单票据\Sweet点餐&quot;+piao.Rows[0][&quot;OrderNumber&quot;].ToString()+&quot;.txt&quot;);</span><br><span class="line">               string a &#x3D; &quot;订单编号：&quot;+piao.Rows[i][&quot;OrderNumber&quot;].ToString();</span><br><span class="line">               string b &#x3D; &quot;订单内容：&quot;;</span><br><span class="line">               sw.WriteLine(a);</span><br><span class="line">               sw.WriteLine(&quot;-------------------------------------------&quot;);</span><br><span class="line">               sw.WriteLine(b);</span><br><span class="line">               string sql_13 &#x3D; &quot;select Food_table.FoodName,Datailedorder_table.ShoppingCount,Datailedorder_table.ShoppingPrice from Order_table join Datailedorder_table on Datailedorder_table.OrderID&#x3D;Order_table.OrderID join Food_table on Food_table.FoodID&#x3D;Datailedorder_table.FoodID where Order_table.OrderNumber&#x3D;&#39;&quot; + piao.Rows[i][&quot;OrderNumber&quot;] + &quot;&#39;&quot;;&#x2F;&#x2F;查找需要的菜品名称，菜品购买的数量，每一种菜品购买的总金额</span><br><span class="line">               DataTable table &#x3D; DBHelper.GetDataTable(sql_13);</span><br><span class="line">               for (int j &#x3D; 0; j &lt; table.Rows.Count; j++)</span><br><span class="line">               &#123;</span><br><span class="line">                   string FoodName &#x3D; table.Rows[i][&quot;FoodName&quot;].ToString();</span><br><span class="line">                   string FoodCount &#x3D; table.Rows[i][&quot;ShoppingCount&quot;].ToString();</span><br><span class="line">                   string ShoppingPrice &#x3D; table.Rows[i][&quot;ShoppingPrice&quot;].ToString();</span><br><span class="line">                   sw.Write(&quot; &#123;0&#125;&quot;,FoodName);</span><br><span class="line">                   sw.Write(&quot;          x&#123;0&#125;&quot;, FoodCount);</span><br><span class="line">                   sw.WriteLine(&quot;                            &#123;0&#125;&quot;,ShoppingPrice);</span><br><span class="line">               &#125;</span><br><span class="line">               sw.WriteLine(&quot;-------------------------------------------&quot;);</span><br><span class="line">               string sum &#x3D; &quot;总计：&quot;+piao.Rows[i][&quot;ShoppingPrice&quot;].ToString();</span><br><span class="line">               string c &#x3D; &quot;联系地址：&quot;;</span><br><span class="line">               string Address &#x3D; &quot;联系地址：&quot;+piao.Rows[i][&quot;Address&quot;].ToString();</span><br><span class="line">               string User &#x3D; &quot;联系人：&quot;+piao.Rows[i][&quot;UserID&quot;].ToString();</span><br><span class="line">               string tel &#x3D; &quot;联系电话：&quot;+piao.Rows[i][&quot;UserTel&quot;].ToString();</span><br><span class="line">               sw.WriteLine(sum);</span><br><span class="line">               sw.WriteLine();</span><br><span class="line">               sw.WriteLine(c);</span><br><span class="line">               sw.WriteLine(&quot;-------------------------------------------&quot;);</span><br><span class="line">               sw.WriteLine(User);</span><br><span class="line">               sw.WriteLine(tel);</span><br><span class="line">               sw.WriteLine(Address);</span><br><span class="line">               sw.Close();</span><br><span class="line">           &#125;</span><br></pre></td></tr></table></figure>
]]></content>
  </entry>
</search>
